# TrendPublish 需求说明文档

## 1. 项目概述

### 1.1 项目背景
TrendPublish 是一个基于 Deno 开发的智能趋势发现和内容发布系统，旨在帮助内容创作者自动化地收集、处理和发布高质量的内容到微信公众号等平台。

### 1.2 项目目标
- 自动化内容采集：从多个数据源自动抓取最新的技术趋势和热点内容
- 智能内容处理：利用 AI 技术对内容进行摘要、排序和优化
- 一键发布：支持自动发布到微信公众号，提供多种精美模板
- 实时通知：提供任务执行状态的实时通知功能

## 2. 功能需求

### 2.1 核心功能模块

#### 2.1.1 数据采集模块
**功能描述**：从多个数据源自动抓取内容
**具体需求**：
- 支持 Twitter/X 内容抓取
- 支持 FireCrawl 网页内容解析
- 支持 HelloGitHub 热门仓库数据
- 支持 AI Bench 排行榜数据
- 支持自定义数据源配置
- 支持 Jina AI 高级搜索和抓取

**输入**：数据源配置（URL、平台类型等）
**输出**：结构化的内容数据（标题、正文、链接、发布时间等）

#### 2.1.2 内容处理模块
**功能描述**：对抓取的内容进行智能处理和优化
**具体需求**：
- AI 内容摘要生成
- 智能标题优化
- 关键词提取
- 内容质量评分和排序
- 内容去重（基于向量相似度）
- 多语言支持

**支持的 AI 服务**：
- DeepSeek AI
- 阿里通义千问
- 讯飞星火
- OpenAI
- 自定义 LLM 服务

#### 2.1.3 内容发布模块
**功能描述**：将处理后的内容发布到目标平台
**具体需求**：
- 微信公众号文章发布
- 支持图片上传和管理
- 多种文章模板支持
- 定时发布功能
- 评论管理配置
- IP 白名单验证

#### 2.1.4 通知系统
**功能描述**：提供任务执行状态的实时通知
**具体需求**：
- Bark 移动端通知
- 钉钉群通知
- 飞书群通知
- 任务成功/失败状态推送
- 错误告警机制

### 2.2 工作流管理

#### 2.2.1 定时任务
- 每日凌晨 3 点自动执行
- 支持按周几配置不同的工作流
- 支持手动触发执行

#### 2.2.2 工作流类型
- **微信文章工作流**：综合内容抓取和发布
- **AI Bench 工作流**：AI 模型排行榜发布
- **HelloGitHub 工作流**：热门开源项目推荐

### 2.3 数据管理

#### 2.3.1 数据存储
- 支持 MySQL 数据库存储
- 向量数据库支持（用于内容去重）
- 配置数据管理
- 数据源动态配置

#### 2.3.2 内容去重
- 基于文本向量的相似度计算
- 支持多种 Embedding 模型
- 可配置相似度阈值

## 3. 非功能需求

### 3.1 性能需求
- 支持并发内容抓取
- 单次处理文章数量：10-50 篇
- 响应时间：工作流执行时间 < 15 分钟
- 系统可用性：99.5%

### 3.2 可扩展性需求
- 支持新增数据源类型
- 支持新增 AI 服务提供商
- 支持新增发布平台
- 模块化架构设计

### 3.3 安全需求
- API 密钥安全管理
- IP 白名单验证
- 错误处理和日志记录
- 数据传输加密

### 3.4 兼容性需求
- 支持 Windows/Linux/MacOS
- Deno 2.0+ 运行环境
- 支持 Docker 容器化部署

## 4. 用户角色

### 4.1 内容创作者
- 配置数据源和发布参数
- 监控工作流执行状态
- 管理发布内容和模板

### 4.2 系统管理员
- 系统部署和维护
- 环境变量配置
- 日志监控和问题排查

## 5. 约束条件

### 5.1 技术约束
- 基于 Deno 运行时
- 使用 TypeScript 开发
- 依赖第三方 API 服务

### 5.2 业务约束
- 遵守各平台的 API 使用规范
- 内容发布需符合平台规则
- 尊重数据源的版权和使用条款

## 6. 验收标准

### 6.1 功能验收
- 所有核心功能模块正常运行
- 工作流能够端到端执行成功
- 通知系统能够及时推送状态

### 6.2 性能验收
- 工作流执行时间符合预期
- 系统资源占用合理
- 错误处理机制有效

### 6.3 用户体验验收
- 配置过程简单明了
- 日志信息清晰易懂
- 错误提示准确有用